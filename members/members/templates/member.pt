<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal">
    <div metal:use-macro="view.layout.macros['master']">
        <div metal:fill-slot="content">


    <h1>${m.fullname()}</h1>

    <div tal:condition="view.user_can_edit">
        <a class="edit_link" href="${portal_url}/member/${m.id}/edit">edit this member</a>
    </div>
   
    <table class="list" width="100%">
        <tr> 
            <th>Name/Email</th>
            <th>Address</th>
            <th>Phones</th>
        </tr>
        <tr class="list-content">
            <td>
                <div>${m.fullname()}</div>
                <div>${m.mem_email}</div>
            </td>
            <td>
                <div>${m.addr_street()}</div>
                <div>${m.addr_city()}</div>
            </td>

            <td>
                <div>Home: ${m.mem_home_tel}</div>
                <div>Work: ${m.mem_work_tel}</div>
                <div>Mobile: ${m.mem_mobile}</div>
            </td>
        </tr>
    </table>


    <h2>Workgroups</h2>

    <table class="list" width="100%">
        <tr>
            <th width="50%">Member</th>
            <th width="50%">leading</th>
        </tr>
        <tr>
            <td class="list-content">
                <div tal:condition="not m.workgroups"
                    tal:content="python: m.fullname() + ' is not member of any workgroup.'">
                </div>
                <tal:block tal:repeat="wg m.workgroups">
                    <a href="${portal_url}/workgroup/${wg.id}">${wg.name}</a>
                    <span tal:condition="not repeat.wg.end">,</span>
                </tal:block>
            </td>
            <td class="list-content">
                <tal:block tal:repeat="wg m.led_wgs">
                    <a href="${portal_url}/workgroup/${wg.id}">${wg.name}</a>
                    <span tal:condition="not repeat.wg.end">,</span>
                </tal:block>
            </td>
        </tr>
    </table>

    <h2>Recent Shifts</h2>

    <table class="list" align="center" tal:condition="past_shifts">
        <tr>
            <th>Workgroup</th>
            <th>Year</th>
            <th>Month</th>
            <th>Day</th>
            <th>Status</th>
        </tr> 
        <tr class="list-content" tal:repeat="s past_shifts">
            <td><a href="${portal_url}/workgroup/${s.wg_id}">${s.workgroup}</a></td>
            <td>${s.year}</td>
            <td>${s.month}</td>
            <td>${s.day}</td>
            <td>${s.state}</td>
        </tr>
    </table>
    <div tal:condition="not past_shifts">
        No recent shifts.
    </div>

    <h2>Upcoming Shifts</h2>

    <table class="list" align="center" tal:condition="future_shifts">
        <tr>
            <th>Workgroup</th>
            <th>Year</th>
            <th>Month</th>
            <th>Day</th>
            <th>Status</th>
        </tr> 
        <tr class="list-content" tal:repeat="s future_shifts">
            <td><a href="${portal_url}/workgroup/${s.wg_id}">${s.workgroup}</a></td>
            <td>${s.year}</td>
            <td>${s.month}</td>
            <td>${s.day}</td>
            <td>${s.state}</td>
        </tr>
    </table>
    <div tal:condition="not future_shifts">
        No upcoming shifts.
    </div>


        </div>
    </div>
</html>
