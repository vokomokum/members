<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal">
    <div metal:use-macro="view.layout.macros['master']">
        <div metal:fill-slot="content">


    <h1>The ${wg.name} Workgroup</h1>

    <div>
        Admin: <a tal:content="wg.leader.fullname()" href="${portal_url}/member/${wg.leader.id}">></a>
    </div>
    <div tal:condition="python: view.user.id == wg.leader.id or
        view.user.mem_admin">
        <a href="${portal_url}/workgroup/${wg.id}/edit">edit this group</a>
    </div>
    
    <div class="description" tal:content="wg.desc"></div>

    <div class="heading">Members:</div>
    <ul>
        <li tal:repeat="m wg.members">
            <a tal:content="m.fullname()" href="${portal_url}/member/${m.id}"></a>
        </li>
    </ul>

    <div class="heading">
        Shifts in ${view.month + 1}/${view.year}:
        <!--select> TODO: month/year selector form 
            <option tal:repeat="num python:range(12)"-->
        <!--form tal:attributes="action python: '%s/workgroup/%s' % (portal_url, str(wg.id) if wg.id else 'fresh')"
            method="post" tal:condition="wg"-->
    </div>
    
    <table>
        <tr>
            <th>Day</th>
            <th>Member</th>
            <th>Status</th>
        </tr> 
        <tr tal:repeat="s shifts">
            <tal:block tal:condition="view.user_is_wgleader">
                <td>is leader</td>
            </tal:block>
            <tal:block tal:condition="not view.user_is_wgleader">
                <td tal:content="s.day"></td>
                <td><a tal:content="s.member.fullname()" href="${portal_url}/member/${s.member.id}"></a></td>
                <td tal:content="s.state"></td>
            </tal:block>
        </tr>
    </table>

        </div>
    </div>
</html>
