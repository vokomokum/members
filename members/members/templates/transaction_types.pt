<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal">
    <div metal:use-macro="view.layout.macros['master']">
        <div metal:fill-slot="content">

    <h1>Transaction Types</h1>
    
    <form action="${portal_url}/transaction-types/new"
          method="post">
        
        <table class="main" align="center" width="80%">
            <tr class="list-content" align="center">
                <td width="80%">
                    <input type="text" size="50" maxlength="50" name="name" />
                </td>
                <td width="20%">
                    <input type="submit" name="add" value="Add"/>
                </td>
            </tr>
        </table>
    </form>

    <!-- List existing ones -->
    <table class="list" width="100%">
        <tr>
            <th colspan="3">Existing</th>
        </tr>
        <tr tal:condition="not:transaction_types">
            <td colspan="3">No transaction types found.</td>
        </tr>
        <tr tal:repeat="tt transaction_types">
            <tal:block tal:condition="tt.reserved">
                <td tal:content="tt.name" title="This type is protected." colspan="3"/>
            </tal:block>
            <tal:block tal:condition="not:tt.reserved">
                <form action="${portal_url}/transaction-type/${tt.id}/save" method="post">
                    <td width="80%">
                        <input name="name" value="${tt.name}" size="40" maxlength="100"/>
                    </td>
                    <td width="10%">
                        <button title="Save this type name" type="submit">Save</button>
                    </td>
                </form>
                <td width="10%">
                    <a title="Delete from list (it has not been used so far)" href="${portal_url}/transaction-type/${tt.id}/delete"
                       tal:condition="not:tt.locked">
                        <button>X</button>
                    </a>
                </td>
            </tal:block>
        </tr>
    </table>

        </div>
    </div>
</html>
