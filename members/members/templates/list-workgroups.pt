<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal">
    <div metal:use-macro="view.layout.macros['master']">
        <div metal:fill-slot="content">
    
            <h1>Workgroups</h1>
            
            <div class="text-right">
                <a class="add-link" href="workgroups/new" tal:condition="view.user.mem_admin">
                    <span class="glyphicon glyphicon-plus"></span> New workgroup
                </a>
            </div>

            <table class="table table-striped table-bordered table-hover table-responsive">
              <thead>
                <tr>
                    <th>
                        <a href="${portal_url}/workgroups?order_dir=${order_name_choice}">Name
                        <span class="glyphicon glyphicon-chevron-${order_name_choice == u'desc' and 'up' or 'down'}"></span></a>
                    </th>
                    <th>Coordinator(s)</th>
                    <th>Description</th>
                    <th>Member count</th>
                </tr>
              </thead>
              <tbody>
                <tr tal:repeat="wg workgroups" class="list-content">
                    <td>
                        <a href="workgroup/${wg.id}" tal:content="wg.name" title="show/edit"></a>
                    </td>
                    <td>
                        <tal:block tal:repeat="l wg.leaders">
                            <a href="member/${l.mem_id}" title="This member is coordinating this workgroup">
                                <span tal:content="l.fullname"></span><span tal:condition="not repeat.l.end">,</span>
                            </a>
                        </tal:block>
                    </td>
                    <td tal:content="wg.desc"></td>
                    <td tal:content="wg.headcount"></td>
                </tr>
              </tbody>
            </table>

        </div>
    </div>
</html>
